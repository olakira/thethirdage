<!DOCTYPE html>
<html lang="en">

	<head>

		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta name="description" content="">
		<meta name="author" content="">

		<title>The Third Age - One Ring Paths</title>

		<!-- Bootstrap core CSS -->
		<link href="vendor/bootstrap/css/bootstrap.css" rel="stylesheet">

		<!-- Custom fonts for this template -->
		<link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css" />
		<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" />

		<!-- Custom styles for this template -->
		<link href="css/grayscale.css" rel="stylesheet">

		<style>
			#memap {
				height: calc(100% - 3.43056rem);
			}
			#key {
				position: absolute;
				bottom: 20px;
				left: 11px;
				z-index: 1000;
				width: 22%;
				min-width: 215px;
			}
			@media (max-width: 480px){
				#key {
					bottom: 100px;
				}
			}
			.leaflet-bottom.leaflet-right .leaflet-control .ui-slider {
				background: #6666fe;
				border: 1px solid #2727fe;
			}
			.leaflet-bottom.leaflet-right .leaflet-control .ui-slider #leaflet-slider .ui-slider-handle {
				background: #2727fe;
			}
			.leaflet-bottom.leaflet-right .leaflet-control #slider-timestamp {
				display: none!important;
			}
			.leaflet-bottom.leaflet-right .leaflet-control:first-child .ui-slider {
				background: #ff6665;
				border: 1px solid #ff2726;
				margin-bottom: 16px;
			}
			.leaflet-bottom.leaflet-right .leaflet-control:first-child .ui-slider #leaflet-slider .ui-slider-handle {
				background: #ff2726;
			}
			body a {
				color: #488C9F !important;
			}
			body a:hover {
				color: #465983 !important;
			}
			.btn-default {
				color: #488C9F;
				border: 1px solid #488C9F;
				background-color: transparent;
			}
			.btn-default:focus, .btn-default:hover {
				color: black;
				border: 1px solid #488C9F;
				outline: none;
				background-color: #488C9F;
			}
			.modal-content {
			background-color: black;
			color: #f2f2f2;
			border: 0px;
			}
			.modal-header {
			color: #488C9F;
			display: block;
			}
			.modal-footer {
				border-top: 0px;
				display: -ms-flexbox;
				display: flex;				-ms-flex-align: center;
				align-items: center;
				-ms-flex-pack: end;
				justify-content: flex-end;
				padding: 15px;
			}
			.modal-header .close {
			float: right;
			color: #f2f2f2;
			}
			h5.modal-header {
			float: left;
			}
		</style>
	</head>

	<body id="page-top">

		<!-- Navigation -->
		<div class="navbar navbar-default navbar-fixed-top" role="navigation">
			<div class="container">
				<div class="navbar-header">
					<a class="navbar-brand" href="."><strong>THE THIRD AGE</strong></a>
				</div>
			</div>
		</div>

		<!-- MODAL -->
		<div class="modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-dialog modal-vertical-centered">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
							<h5 class="modal-title" id="myModalLabel" style="float:left"><strong>The Third Age</strong> - One Ring Paths</h5>
						</div>
						<div class="modal-body">
							Use the two sliders in the lower-right to progress through the ring's paths. Click on a pin to open its popup, with information about the ring's journey through the locale.
						</div>
						<div class="modal-footer">
							<label ><input class="dont" type="checkbox" name="dismiss"> Don't show again</label><br />
							<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Map Key -->
		<img id="key" src="img/key.png" />

		<!-- Map Section -->
		<div id="memap"></div>

		<!-- Bootstrap core JavaScript -->
		<script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
		<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js" integrity="sha256-T0Vest3yCU7pafRw9r+settMBX6JkKN06dqBnpQ8d30=" crossorigin="anonymous"></script>
		<!--jQuery UI Touch js, required for touchscreen use-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>

		<!-- Plugin JavaScript -->
		<script src="vendor/jquery-easing/jquery.easing.js"></script>
		<script src="vendor/popper/popper.js"></script>
		<script src="vendor/bootstrap/js/bootstrap.js"></script>



		<!-- Custom scripts for this template -->
		<script src="js/grayscale.js"></script>

		<!-- Leaflet and Plugins Scripts -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js"></script>
		<script src="js/SliderControl.js"></script>

		<!-- Initiates Modal and Uses cookies for Dont Show Again Checkbox -->
		<script type="text/javascript">
			$(document).ready(function () {
				$('#myModal').modal();

				//check cookies
				function setCookie(){
					var dis = document.cookie;
					while(dis.charAt(0)==" ") dis = dis.substring(1);
					if(dis.substring(8,13)== "false"){
						$('#myModal').modal('hide');
					}
					console.log(dis.substring(8,13));
				}
				setCookie();

				var $check = $("input.dont").click(function(){
					if($("input.dont").is(":checked")){
						document.cookie = "display=false";
					}else{
						document.cookie = "display=true";
					}

				});
			});
		</script>

		<!-- Centers Modal Vertically -->
		<script type="text/javascript">
			function centerModal() {
				$(this).css('display', 'block');
				var $dialog = $(this).find(".modal-dialog");
				var offset = ($(window).height() - $dialog.height()) / 2;

				// Center modal vertically in window
				$dialog.css("margin-top", offset);
			}
			$('.modal').on('show.bs.modal', centerModal);
			$(window).on("resize", function () {
				$('.modal:visible').each(centerModal);
			});
		</script>

		<!-- Custom Map Script -->
		<script>
			var northwest = L.latLng(15.25, -22.65),
				southeast = L.latLng(-15.25, 22.65),
				bounds = L.latLngBounds(northwest, southeast),
//				keyUrl = 'img/key.png',
//				keyLocation = [[1.56261, -17.979], [4.12572, -13.28022]],
				memap = L.map('memap', {
					attributionControl: false
				}).setMaxBounds(bounds).setView([6.19856, -10.50791], 7);
			L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
				minZoom: 5,
				maxZoom: 9,
				tileSize: 512,
				zoomOffset: -1,
				id: 'publicthrowaway58046/ckuuxu0vw4owk18pcgwxhqykd',
				accessToken: 'pk.eyJ1IjoicHVibGljdGhyb3dhd2F5NTgwNDYiLCJhIjoiY2t1dXhzbzdiMWM4eTJ3bzJoNzY4dW8zdyJ9.eegbbfI7edpQce55_kXJAg'
			}).addTo(memap);
//			L.control.mousePosition({lngFirst:false}).addTo(memap);
			L.control.attribution().setPrefix(
				'<a alt="A JS library for interactive maps" href="http://leafletjs.com" target="_blank">Leaflet</a>'
			).addAttribution(
				'Map Tiles from &copy; <a alt="Iron Crown Enterprise" href="http://ironcrown.com/middle-earth-role-playing/">Iron Crown Enterprises</a> | <a alt="Creative Commons" href="http://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/80x15.png" /></a> | Tiles compiled via <a alt="Mapbox" href="https://www.mapbox.com/" target="_blank">Mapbox Style Editor</a>'
			).addTo(memap);
//			L.imageOverlay(keyUrl, keyLocation).addTo(memap);

			//add line points
			var	pointA = new L.LatLng(6.90219, -12.27448),
				pointB = new L.LatLng(7.20203, -10.12249),
				pointC = new L.LatLng(7.1775, -9.46472),
                pointD = new L.LatLng(7.38426, -8.08594),
                pointE = new L.LatLng(7.68922, -6.21826),
				pointF = new L.LatLng(7.67833, -5.52612),
                pointG = new L.LatLng(7.60211, -5.19653),
                pointH = new L.LatLng(7.39515, -4.87793),
				pointI = new L.LatLng(7.86447, -4.9021),
                pointJ = new L.LatLng(7.15322, -6.97522),
				point1 = new L.LatLng(6.90219, -12.20448),
				point2 = new L.LatLng(6.62156, -11.70044),
				point3 = new L.LatLng(7.20203, -10.05249),
				point4 = new L.LatLng(7.1775, -9.39472),
				point5 = new L.LatLng(6.12963, -9.12964),
				point6 = new L.LatLng(5.94609, -7.37732),
				point7 = new L.LatLng(4.52276, -6.60553),
				point8 = new L.LatLng(4.62132, -5.9079),
				point9 = new L.LatLng(3.58415, -5.54919),
				point10 = new L.LatLng(3.94591, -4.66479),
				point11 = new L.LatLng(3.71188, -6.49512),
				point12 = new L.LatLng(6.90219, -12.13448),
				point13 = new L.LatLng(6.52849, -13.24402);

			//add PointLine arrays
			var	numerical1 = [point1, point2],
				numerical2 = [point2, point3],
				numerical3 = [point3, point4],
				numerical4 = [point4, point5],
				numerical5 = [point5, point6],
				numerical6 = [point6, point7],
				numerical7 = [point7, point8],
				numerical8 = [point8, point9],
				numerical9 = [point9, point10],
				numerical10 = [point10, point11],
				numerical11 = [point11, point12],
				numerical12 = [point12, point13],
				alpha1 = [pointA, pointB],
				alpha2 = [pointB, pointC],
				alpha3 = [pointC, pointD],
				alpha4 = [pointD, pointE],
				alpha5 = [pointE, pointF],
				alpha6 = [pointF, pointG],
				alpha7 = [pointG, pointH],
				alpha8 = [pointH, pointI],
				alpha9 = [pointI, pointJ],
				alpha10 = [pointJ, pointA];

			//create PolyLines
			var	numberLine1 = new L.Polyline(numerical1, {
					color: '#2727fe',
					weight: 3,
					opacity: 1,
					smoothFactor: 1,
					time: "02"
				}),
				numberLine2 = new L.Polyline(numerical2, {
					color: '#2727fe',
					weight: 3,
					opacity: 1,
					smoothFactor: 1,
					time: "03"
				}),
				numberLine3 = new L.Polyline(numerical3, {
					color: '#2727fe',
					weight: 3,
					opacity: 1,
					smoothFactor: 1,
					time: "04"
				}),
				numberLine4 = new L.Polyline(numerical4, {
					color: '#2727fe',
					weight: 3,
					opacity: 1,
					smoothFactor: 1,
					time: "04"
				}),
				numberLine5 = new L.Polyline(numerical5, {
					color: '#2727fe',
					weight: 3,
					opacity: 1,
					smoothFactor: 1,
					time: "05"
				}),
				numberLine6 = new L.Polyline(numerical6, {
					color: '#2727fe',
					weight: 3,
					opacity: 1,
					smoothFactor: 1,
					time: "06"
				}),
				numberLine7 = new L.Polyline(numerical7, {
					color: '#2727fe',
					weight: 3,
					opacity: 1,
					smoothFactor: 1,
					time: "07"
				}),
				numberLine8 = new L.Polyline(numerical8, {
					color: '#2727fe',
					weight: 3,
					opacity: 1,
					smoothFactor: 1,
					time: "08"
				}),
				numberLine9 = new L.Polyline(numerical9, {
					color: '#2727fe',
					weight: 3,
					opacity: 1,
					smoothFactor: 1,
					time: "09"
				}),
				numberLine10 = new L.Polyline(numerical10, {
					color: '#2727fe',
					weight: 3,
					opacity: 1,
					smoothFactor: 1,
					time: "10"
				}),
				numberLine11 = new L.Polyline(numerical11, {
					color: '#2727fe',
					weight: 3,
					opacity: 1,
					smoothFactor: 1,
					time: "11"
				}),
				numberLine12 = new L.Polyline(numerical12, {
					color: '#2727fe',
					weight: 3,
					opacity: 1,
					smoothFactor: 1,
					time: "12"
				}),
				alphaLine1 = new L.Polyline(alpha1, {
					color: '#ff2726',
					weight: 3,
					opacity: 1,
					smoothFactor: 1,
					time: "02"
				}),
				alphaLine2 = new L.Polyline(alpha2, {
					color: '#ff2726',
					weight: 3,
					opacity: 1,
					smoothFactor: 1,
					time: "03"
				}),
				alphaLine3 = new L.Polyline(alpha3, {
					color: '#ff2726',
					weight: 3,
					opacity: 1,
					smoothFactor: 1,
					time: "04"
				}),
				alphaLine4 = new L.Polyline(alpha4, {
					color: '#ff2726',
					weight: 3,
					opacity: 1,
					smoothFactor: 1,
					time: "05"
				}),
				alphaLine5 = new L.Polyline(alpha5, {
					color: '#ff2726',
					weight: 3,
					opacity: 1,
					smoothFactor: 1,
					time: "06"
				}),
				alphaLine6 = new L.Polyline(alpha6, {
					color: '#ff2726',
					weight: 3,
					opacity: 1,
					smoothFactor: 1,
					time: "07"
				}),
				alphaLine7 = new L.Polyline(alpha7, {
					color: '#ff2726',
					weight: 3,
					opacity: 1,
					smoothFactor: 1,
					time: "08"
				}),
				alphaLine8 = new L.Polyline(alpha8, {
					color: '#ff2726',
					weight: 3,
					opacity: 1,
					smoothFactor: 1,
					time: "09"
				}),
				alphaLine9 = new L.Polyline(alpha9, {
					color: '#ff2726',
					weight: 3,
					opacity: 1,
					smoothFactor: 1,
					time: "10"
				}),
				alphaLine10 = new L.Polyline(alpha10, {
					color: '#ff2726',
					weight: 3,
					opacity: 1,
					smoothFactor: 1,
					time: "11"
				});

			//add pins
			var hobbits = [
				{
					type: 'Feature',
					geometry: {
						type: 'Point',
						coordinates: [-10.12249, 7.20203]
					},
					properties: {
						title: 'Troll Encounter',
						time: "02",
						description: 'When Bilbo&#39;s companions are captured by hungry trolls, Bilbo distracts the trolls until daylight breaks and the trolls are turned into stone',
						url: 'http://lotr.wikia.com/wiki/Stone-trolls',
						image: 'img/loc-img/the-trolls.jpg',
						icon: {
							iconUrl: 'leaflet/images/GondorIconRed.png',
							iconSize: [25, 41], // size of the icon
							iconAnchor: [12.5, 41], // point of the icon which will correspond to marker's location
							popupAnchor: [0, -41], // point from which the popup should open relative to the iconAnchor
							shadowURL: 'leaflet/images/marker-shadow.png',
							shadowSize:   [55, 41], // size of shadow
							shadowAnchor: [12.5, 41], // point of icon from which shadow casts
							className: 'dot'
						}
					}
				},
				{
					type: 'Feature',
					geometry: {
						type: 'Point',
						coordinates: [-9.46472, 7.1775]
					},
					properties: {
						title: 'Thorin&#39;s Company at Rivendell',
						time: '03',
						description: 'Bilbo, Gandalf, and Thorin&#39;s company of dwarves are hosted by Elrond at Rivendell',
						url: 'http://lotr.wikia.com/wiki/Rivendell',
						image: 'img/loc-img/rivendell.jpg',
						icon: {
							iconUrl: 'leaflet/images/GondorIconRed.png',
							iconSize: [25, 41], // size of the icon
							iconAnchor: [12.5, 41], // point of the icon which will correspond to marker's location
							popupAnchor: [0, -41], // point from which the popup should open relative to the iconAnchor
							shadowURL: 'leaflet/images/marker-shadow.png',
							shadowSize:   [55, 41], // size of shadow
							shadowAnchor: [12.5, 41], // point of icon from which shadow casts
							className: 'dot'
						}
					}
				},
				{
					type: 'Feature',
					geometry: {
						type: 'Point',
						coordinates: [-8.08594, 7.38426]
					},
					properties: {
						title: 'Misty Mountains',
						time: '04',
						description: 'Gandalf, Bilbo, and the dwarves cross the mountains by the High Pass. Bilbo gets lost, meets Gollum, and accidentally discovers the Ring',
						image: 'img/loc-img/misty-mountains.jpg',
						url: 'http://lotr.wikia.com/wiki/Misty_Mountains',
						icon: {
							iconUrl: 'leaflet/images/GondorIconRed.png',
							iconSize: [25, 41], // size of the icon
							iconAnchor: [12.5, 41], // point of the icon which will correspond to marker's location
							popupAnchor: [0, -41], // point from which the popup should open relative to the iconAnchor
							shadowURL: 'leaflet/images/marker-shadow.png',
							shadowSize:   [55, 41], // size of shadow
							shadowAnchor: [12.5, 41], // point of icon from which shadow casts
							className: 'dot'
						}
					}
				},
				{
					type: 'Feature',
					geometry: {
						type: 'Point',
						coordinates: [-6.21826, 7.68922]
					},
					properties: {
						title: 'Mirkwood',
						time: '05',
						description: 'Bilbo and the dwarves try to travel through the forest undetected, but are captured by elves',
						image: 'img/loc-img/mirkwood.jpg',
						url: 'http://lotr.wikia.com/wiki/Mirkwood',
						icon: {
							iconUrl: 'leaflet/images/GondorIconRed.png',
							iconSize: [25, 41], // size of the icon
							iconAnchor: [12.5, 41], // point of the icon which will correspond to marker's location
							popupAnchor: [0, -41], // point from which the popup should open relative to the iconAnchor
							shadowURL: 'leaflet/images/marker-shadow.png',
							shadowSize:   [55, 41], // size of shadow
							shadowAnchor: [12.5, 41], // point of icon from which shadow casts
							className: 'dot'
						}
					}
				},
				{
					type: 'Feature',
					geometry: {
						type: 'Point',
						coordinates: [-5.52612, 7.67833]
					},
					properties: {
						title: 'Thranduil&#39;s Hall',
						time: '06',
						description: 'Thorin and the dwarves enjoy the elven king Thranduil&#39;s hospitality, but from behind bars',
						image: 'img/loc-img/thranduil.jpg',
						url: 'http://lotr.wikia.com/wiki/Thranduil',
						icon: {
							iconUrl: 'leaflet/images/GondorIconRed.png',
							iconSize: [25, 41], // size of the icon
							iconAnchor: [12.5, 41], // point of the icon which will correspond to marker's location
							popupAnchor: [0, -41], // point from which the popup should open relative to the iconAnchor
							shadowURL: 'leaflet/images/marker-shadow.png',
							shadowSize:   [55, 41], // size of shadow
							shadowAnchor: [12.5, 41], // point of icon from which shadow casts
							className: 'dot'
						}
					}
				},
				{
					type: 'Feature',
					geometry: {
						type: 'Point',
						coordinates: [-5.19653, 7.60211]
					},
					properties: {
						title: 'Barrel Ride',
						time: '07',
						description: 'Tired of Thranduil&#39;s enforced hospitality, Bilbo and the dwarves use the Ring to escape Thranduil&#39;s Hall in barrels on the river',
						image: 'img/loc-img/barrel-ride.jpg',
						url: 'http://lotr.wikia.com/wiki/Barrels_Out_Of_Bond',
						icon: {
							iconUrl: 'leaflet/images/GondorIconRed.png',
							iconSize: [25, 41], // size of the icon
							iconAnchor: [12.5, 41], // point of the icon which will correspond to marker's location
							popupAnchor: [0, -41], // point from which the popup should open relative to the iconAnchor
							shadowURL: 'leaflet/images/marker-shadow.png',
							shadowSize:   [55, 41], // size of shadow
							shadowAnchor: [12.5, 41], // point of icon from which shadow casts
							className: 'dot'
						}
					}
				},
				{
					type: 'Feature',
					geometry: {
						type: 'Point',
						coordinates: [-4.87793, 7.39515]
					},
					properties: {
						title: 'Lake-town',
						time: '08',
						description: 'Also called Esgaroth. Seems like a great place, but gets destroyed by a dragon',
						image: 'img/loc-img/lake-town.jpg',
						url: 'http://lotr.wikia.com/wiki/Lake-town',
						icon: {
							iconUrl: 'leaflet/images/GondorIconRed.png',
							iconSize: [25, 41], // size of the icon
							iconAnchor: [12.5, 41], // point of the icon which will correspond to marker's location
							popupAnchor: [0, -41], // point from which the popup should open relative to the iconAnchor
							shadowURL: 'leaflet/images/marker-shadow.png',
							shadowSize:   [55, 41], // size of shadow
							shadowAnchor: [12.5, 41], // point of icon from which shadow casts
							className: 'dot'
						}
					}
				},
				{
					type: 'Feature',
					geometry: {
						type: 'Point',
						coordinates: [-4.9021, 7.86447]
					},
					properties: {
						title: 'Lonely Mountain',
						time: '09',
						description: 'Once thriving Kingdom Under the Mountain of the Dwarves, desolated by the wyrm Smaug. It has now been reclaimed by Thorin I and thrives once again, resumming their alliances with man and elves.',
						url:'https://en.wikipedia.org/wiki/Lonely_Mountain',
						image: 'img/loc-img/The_lonely_mountain.jpg',
						icon: {
							iconUrl: 'leaflet/images/GondorIconRed.png',
							iconSize: [25, 41], // size of the icon
							iconAnchor: [12.5, 41], // point of the icon which will correspond to marker's location
							popupAnchor: [0, -41], // point from which the popup should open relative to the iconAnchor
							shadowURL: 'leaflet/images/marker-shadow.png',
							shadowSize:   [55, 41], // size of shadow
							shadowAnchor: [12.5, 41], // point of icon from which shadow casts
							className: 'dot'
						}
					}
				},
				{
					type: 'Feature',
					geometry: {
						type: 'Point',
						coordinates: [-6.97522, 7.15322]
					},
					properties: {
						title: 'Beorn&#39;s Hall',
						time: '10',
						description: 'Home of the shapechanger Beorn where Bilbo and company escape from the goblins and wargs. From here, they enter Mirkwood and on Bilbo&#39;s return, he and Gandolf winter with Beorn.',
						url:'http://tolkiengateway.net/wiki/Beorn%27s_Hall',
						image: 'img/loc-img/Beorns-Hall.jpg',
						icon: {
							iconUrl: 'leaflet/images/GondorIconRed.png',
							iconSize: [25, 41], // size of the icon
							iconAnchor: [12.5, 41], // point of the icon which will correspond to marker's location
							popupAnchor: [0, -41], // point from which the popup should open relative to the iconAnchor
							shadowURL: 'leaflet/images/marker-shadow.png',
							shadowSize:   [55, 41], // size of shadow
							shadowAnchor: [12.5, 41], // point of icon from which shadow casts
							className: 'dot'
						}
					}
				},
				{
					type: 'Feature',
					geometry: {
						type: 'Point',
						coordinates: [-12.27448, 6.90219]
					},
					properties: {
						title: 'Bag End',
						time: '01',
						description: 'Bilbo Baggins&#39; hobbit hole is comfortable and tidy, until Gandalf invites a group of dwarves for dinner',
						url: 'http://lotr.wikia.com/wiki/Bag_End',
						image: 'img/loc-img/bag-end.png',
						position: 'start',
						icon: {
							iconUrl: 'leaflet/images/StartIconRed.png',
							iconSize: [25, 41], // size of the icon
							iconAnchor: [12.5, 41], // point of the icon which will correspond to marker's location
							popupAnchor: [0, -41], // point from which the popup should open relative to the iconAnchor
							shadowURL: 'leaflet/images/marker-shadow.png',
							shadowSize:   [55, 41], // size of shadow
							shadowAnchor: [12.5, 41], // point of icon from which shadow casts
							className: 'dot'
						}
					}
				}
			];

			var lotr = [
				{
					type: 'Feature',
					geometry: {
						type: 'Point',
						coordinates: [-9.39472, 7.1775]
					},
					properties: {
						title: 'The Fellowship of the Ring at Rivendell',
						time: '04',
						description: 'After escaping the Nazgul, Frodo and the Fellowship visit Rivendell, where they also run into the happily retired Bilbo',
						url: 'http://lotr.wikia.com/wiki/Rivendell',
						image: 'img/loc-img/rivendell.jpg',
						icon: {
							iconUrl: 'leaflet/images/GondorIconBlue.png',
							iconSize: [25, 41], // size of the icon
							iconAnchor: [12.5, 41], // point of the icon which will correspond to marker's location
							popupAnchor: [0, -41], // point from which the popup should open relative to the iconAnchor
							shadowURL: 'leaflet/images/marker-shadow.png',
							shadowSize:   [55, 41], // size of shadow
							shadowAnchor: [12.5, 41], // point of icon from which shadow casts
							className: 'dot'
						}
					}
				},
				{
					type: 'Feature',
					geometry: {
						type: 'Point',
						coordinates: [-9.12964, 6.12963]
					},
					properties: {
						title: 'Mines of Moria',
						time: '05',
						description: 'When the Fellowship encounters the Misty Mountains, they decide to cross underground through the Mines of Moria, which they think are deserted...',
						image: 'img/loc-img/mines-moria.jpg',
						url: 'http://lotr.wikia.com/wiki/Moria',
						icon: {
							iconUrl: 'leaflet/images/GondorIconBlue.png',
							iconSize: [25, 41], // size of the icon
							iconAnchor: [12.5, 41], // point of the icon which will correspond to marker's location
							popupAnchor: [0, -41], // point from which the popup should open relative to the iconAnchor
							shadowURL: 'leaflet/images/marker-shadow.png',
							shadowSize:   [55, 41], // size of shadow
							shadowAnchor: [12.5, 41], // point of icon from which shadow casts
							className: 'dot'
						}
					}
				},
				{
					type: 'Feature',
					geometry: {
						type: 'Point',
						coordinates: [-11.70044, 6.62156]
					},
					properties: {
						title: 'Tom Bombadil&#39;s House',
						time: '02',
						description: 'The house of Tom Bombadill and Goldberry. Frodo and company stay here when Merry and Pippen are captured by Old Man Willow. He then escorts them through the Barrow Downs after freeing them from the wights.',
						url:'http://tolkiengateway.net/wiki/Tom_Bombadil',
						image: 'img/loc-img/TomBombadilsHouse.jpg',
						icon: {
							iconUrl: 'leaflet/images/GondorIconBlue.png',
							iconSize: [25, 41], // size of the icon
							iconAnchor: [12.5, 41], // point of the icon which will correspond to marker's location
							popupAnchor: [0, -41], // point from which the popup should open relative to the iconAnchor
							shadowURL: 'leaflet/images/marker-shadow.png',
							shadowSize:   [55, 41], // size of shadow
							shadowAnchor: [12.5, 41], // point of icon from which shadow casts
							className: 'dot'
						}
					}
				},
				{
					type: 'Feature',
					geometry: {
						type: 'Point',
						coordinates: [-7.37732, 5.94609]
					},
					properties: {
						title: 'Lothlorien',
						time: '06',
						description: 'Considered one of the most beautiful places in all Middle-earth, it is the home of the Silvan Elves. Frodo and company received gifts from the Lady Galadriel and were sent down the River Anduin. Frodo was shown visions of the future in Galadriel&#39;s mirror.',
						url:'http://tolkiengateway.net/wiki/Lothl%C3%B3rien',
						image: 'img/loc-img/lothlorien.jpg',
						icon: {
							iconUrl: 'leaflet/images/GondorIconBlue.png',
							iconSize: [25, 41], // size of the icon
							iconAnchor: [12.5, 41], // point of the icon which will correspond to marker's location
							popupAnchor: [0, -41], // point from which the popup should open relative to the iconAnchor
							shadowURL: 'leaflet/images/marker-shadow.png',
							shadowSize:   [55, 41], // size of shadow
							shadowAnchor: [12.5, 41], // point of icon from which shadow casts
							className: 'dot'
						}
					}
				},
				{
					type: 'Feature',
					geometry: {
						type: 'Point',
						coordinates: [-6.60553, 4.52276]
					},
					properties: {
						title: 'Amon Hen',
						time: '07',
						description: 'Upon it&#39;s summit sits the Seat of Seeing. Here is where Boromir attempted to take the ring from Frodo and the fellowship was split. While fleeing from Boromir, Frodo sits upon the Seat of Seeing and recieves glimpses of the war across the land. Sauron almost locates the ring at this point and Frodo realizes he must continue on alone.',
						url:'http://tolkiengateway.net/wiki/Amon_Hen',
						image: 'img/loc-img/Amon_Hen.jpg',
						icon: {
							iconUrl: 'leaflet/images/GondorIconBlue.png',
							iconSize: [25, 41], // size of the icon
							iconAnchor: [12.5, 41], // point of the icon which will correspond to marker's location
							popupAnchor: [0, -41], // point from which the popup should open relative to the iconAnchor
							shadowURL: 'leaflet/images/marker-shadow.png',
							shadowSize:   [55, 41], // size of shadow
							shadowAnchor: [12.5, 41], // point of icon from which shadow casts
							className: 'dot'
						}
					}
				},
				{
					type: 'Feature',
					geometry: {
						type: 'Point',
						coordinates: [-5.9079, 4.62132]
					},
					properties: {
						title: 'Dead Marshes',
						time: '08',
						description: 'The Last Alliance of Elves and Men fought and died together here. Over half of the forces of Lothlorien died in this battle, giving rise to the faces of the dead in the marsh. Frodo and Sam follow Gollum through the marshes into Shelob&#39;s lair.',
						url:'http://tolkiengateway.net/wiki/Dead_Marshes',
						image: 'img/loc-img/DeadMarshes.jpg',
						icon: {
							iconUrl: 'leaflet/images/GondorIconBlue.png',
							iconSize: [25, 41], // size of the icon
							iconAnchor: [12.5, 41], // point of the icon which will correspond to marker's location
							popupAnchor: [0, -41], // point from which the popup should open relative to the iconAnchor
							shadowURL: 'leaflet/images/marker-shadow.png',
							shadowSize:   [55, 41], // size of shadow
							shadowAnchor: [12.5, 41], // point of icon from which shadow casts
							className: 'dot'
						}
					}
				},
				{
					type: 'Feature',
					geometry: {
						type: 'Point',
						coordinates: [-5.54919, 3.58415]
					},
					properties: {
						title: 'Tower of Cirith Ungol',
						time: '09',
						description: 'Originally a watchtower of Gondor, Frodo is captured by the Uruk hai and taken here. Sam follows, using the ring and rescues him. From there they make their way into Mordor',
						url:'http://tolkiengateway.net/wiki/Tower_of_Cirith_Ungol',
						image: 'img/loc-img/CirithUngol.gif',
						icon: {
							iconUrl: 'leaflet/images/GondorIconBlue.png',
							iconSize: [25, 41], // size of the icon
							iconAnchor: [12.5, 41], // point of the icon which will correspond to marker's location
							popupAnchor: [0, -41], // point from which the popup should open relative to the iconAnchor
							shadowURL: 'leaflet/images/marker-shadow.png',
							shadowSize:   [55, 41], // size of shadow
							shadowAnchor: [12.5, 41], // point of icon from which shadow casts
							className: 'dot'
						}
					}
				},
				{
					type: 'Feature',
					geometry: {
						type: 'Point',
						coordinates: [-4.66479, 3.94591]
					},
					properties: {
						title: 'Mount Doom',
						time: '10',
						description: 'This is where Sauron forges the One Ring and where it must be destroyed. Frodo and Sam accomplish this task with the help of Gollum, who perishes in the flames.',
						url:'http://tolkiengateway.net/wiki/Mount_Doom',
						image: 'img/loc-img/mountdoom.jpg',
						icon: {
							iconUrl: 'leaflet/images/GondorIconBlue.png',
							iconSize: [25, 41], // size of the icon
							iconAnchor: [12.5, 41], // point of the icon which will correspond to marker's location
							popupAnchor: [0, -41], // point from which the popup should open relative to the iconAnchor
							shadowURL: 'leaflet/images/marker-shadow.png',
							shadowSize:   [55, 41], // size of shadow
							shadowAnchor: [12.5, 41], // point of icon from which shadow casts
							className: 'dot'
						}
					}
				},
				{
					type: 'Feature',
					geometry: {
						type: 'Point',
						coordinates: [-6.49512, 3.71188]
					},
					properties: {
						title: 'Minas Tirith',
						time: '11',
						description: 'The capital of the southern kingdoms ruled by kings and stewards until the return of Aragorn.',
						url:'http://tolkiengateway.net/wiki/Minas_Tirith',
						image: 'img/loc-img/Gondor.jpg',
						icon: {
							iconUrl: 'leaflet/images/GondorIconBlue.png',
							iconSize: [25, 41], // size of the icon
							iconAnchor: [12.5, 41], // point of the icon which will correspond to marker's location
							popupAnchor: [0, -41], // point from which the popup should open relative to the iconAnchor
							shadowURL: 'leaflet/images/marker-shadow.png',
							shadowSize:   [55, 41], // size of shadow
							shadowAnchor: [12.5, 41], // point of icon from which shadow casts
							className: 'dot'
						}
					}
				},
				{
					type: 'Feature',
					geometry: {
						type: 'Point',
						coordinates: [-12.13448, 6.90219]
					},
					properties: {
						title: 'Battle of Bywater',
						time: '12',
						description: 'This is the last battle in the War of the Ring and only the second and last battle fought within the Shire. When Frodo returns home from his adventures, he and Gandolf discover that everythinng hobbits hold dear has been outlawed by Ruffians. Merry and Pippen lead the overthrow.',
						url:'http://tolkiengateway.net/wiki/Battle_of_Bywater',
						image: 'img/loc-img/BattleofBywater.jpg',
						icon: {
							iconUrl: 'leaflet/images/GondorIconBlue.png',
							iconSize: [25, 41], // size of the icon
							iconAnchor: [12.5, 41], // point of the icon which will correspond to marker's location
							popupAnchor: [0, -41], // point from which the popup should open relative to the iconAnchor
							shadowURL: 'leaflet/images/marker-shadow.png',
							shadowSize:   [55, 41], // size of shadow
							shadowAnchor: [12.5, 41], // point of icon from which shadow casts
							className: 'dot'
						}
					}
				},
				{
					type: 'Feature',
					geometry: {
						type: 'Point',
						coordinates: [-12.20448, 6.90219]
					},
					properties: {
						title: 'Hobbiton, the Shire',
						time: '01',
						description: 'Frodo Baggins and Samwise Gamgee depart from Hobbiton to begin their journey with the Ring',
						url: 'http://lotr.wikia.com/wiki/Hobbiton',
						image: 'img/loc-img/bag-end.png',
						position: 'start',
						icon: {
							iconUrl: 'leaflet/images/StartIconBlue.png',
							iconSize: [25, 41], // size of the icon
							iconAnchor: [12.5, 41], // point of the icon which will correspond to marker's location
							popupAnchor: [0, -41], // point from which the popup should open relative to the iconAnchor
							shadowURL: 'leaflet/images/marker-shadow.png',
							shadowSize:   [55, 41], // size of shadow
							shadowAnchor: [12.5, 41], // point of icon from which shadow casts
							className: 'dot'
						}
					}
				},
				{
					type: 'Feature',
					geometry: {
						type: 'Point',
						coordinates: [-13.24402, 6.52849]
					},
					properties: {
						title: 'Grey Havens',
						time: '13',
						description: 'Port city of the elves where Frodo, Bilbo, Galadriel and Gandolf sail for Valinor. Some years later, Samwise Gamgee sails to Valinor and takes his place among the ringbearers. Rumor has it that centuries later, Legolas and Gimli joined them.',
						url:'http://tolkiengateway.net/wiki/Grey_Havens',
						image: 'img/loc-img/Grey-Havens.-By-Alan-Lee.jpg',
						icon: {
							iconUrl: 'leaflet/images/GondorIconBlue.png',
							iconSize: [25, 41], // size of the icon
							iconAnchor: [12.5, 41], // point of the icon which will correspond to marker's location
							popupAnchor: [0, -41], // point from which the popup should open relative to the iconAnchor
							shadowURL: 'leaflet/images/marker-shadow.png',
							shadowSize:   [55, 41], // size of shadow
							shadowAnchor: [12.5, 41], // point of icon from which shadow casts
							className: 'dot'
						}
					}
				},
				{
					type: 'Feature',
					geometry: {
						type: 'Point',
						coordinates: [-10.05249, 7.20203]
					},
					properties: {
						title: 'Frozen Trolls',
						time: '03',
						description: 'Frodo and friends found the trolls frozen in stone through their encounter with Bilbo decades before.',
						url: 'http://lotr.wikia.com/wiki/Stone-trolls',
						image: 'img/loc-img/the-trolls.jpg',
						icon: {
							iconUrl: 'leaflet/images/GondorIconBlue.png',
							iconSize: [25, 41], // size of the icon
							iconAnchor: [12.5, 41], // point of the icon which will correspond to marker's location
							popupAnchor: [0, -41], // point from which the popup should open relative to the iconAnchor
							shadowURL: 'leaflet/images/marker-shadow.png',
							shadowSize:   [55, 41], // size of shadow
							shadowAnchor: [16, 41], // point of icon from which shadow casts
							className: 'dot'
						}
					}
				}
			]

			var event1 = {
					filter: time1,
					onEachFeature
				},
			 	event2 = {
					filter: time2,
					onEachFeature
				},
			 	event3 = {
					filter: time3,
					onEachFeature
				},
				event4 = {
					filter: time4,
					onEachFeature
				},
				event5 = {
					filter: time5,
					onEachFeature
				},
				event6 = {
					filter: time6,
					onEachFeature
				},
				event7 = {
					filter: time7,
					onEachFeature
				},
				event8 = {
					filter: time8,
					onEachFeature
				},
				event9 = {
					filter: time9,
					onEachFeature
				},
				event10 = {
					filter: time10,
					onEachFeature
				},
				event11 = {
					filter: time11,
					onEachFeature
				},
				event12 = {
					filter: time12,
					onEachFeature
				},
				event13 = {
					filter: time13,
					onEachFeature
				};

			var time1 = {time: "01"},
				time2 = {time: "02"},
				time3 = {time: "03"},
				time4 = {time: "04"},
				time5 = {time: "05"},
				time6 = {time: "06"},
				time7 = {time: "07"},
				time8 = {time: "08"},
				time9 = {time: "09"},
				time10 = {time: "10"},
				time11 = {time: "11"},
				time12 = {time: "12"};
				time13 = {time: "13"};

			function onEachFeature (feature, layer) {
				var content = "<div style='clear: both'></div><div style='float: left; padding: 5px; margin-right: 10px'><img style='width: 200px;' src=" + feature.properties.image + " /></div><div float: right><span class='pop'><a target='_blank' href='" + feature.properties.url + "'>" + feature.properties.title + "</a><br>" + feature.properties.description + "</p></span></div><div style='clear: both'></div>";
				layer.setIcon(L.icon(feature.properties.icon));
				layer.bindPopup(content, {minWidth: 400, autoPanPadding: [10,80], closeButton: true});
			};

			var hobbit1 = L.geoJSON(hobbits, event1),
			 	hobbit2 = L.geoJSON(hobbits, event2),
			 	hobbit3 = L.geoJSON(hobbits, event3),
				hobbit4 = L.geoJSON(hobbits, event4),
			 	hobbit5 = L.geoJSON(hobbits, event5),
				hobbit6 = L.geoJSON(hobbits, event6),
			 	hobbit7 = L.geoJSON(hobbits, event7),
				hobbit8 = L.geoJSON(hobbits, event8),
			 	hobbit9 = L.geoJSON(hobbits, event9),
				hobbit10 = L.geoJSON(hobbits, event10);

			var lotr1 = L.geoJSON(lotr, event1),
			 	lotr2 = L.geoJSON(lotr, event2),
			 	lotr3 = L.geoJSON(lotr, event3),
				lotr4 = L.geoJSON(lotr, event4),
			 	lotr5 = L.geoJSON(lotr, event5),
				lotr6 = L.geoJSON(lotr, event6),
			 	lotr7 = L.geoJSON(lotr, event7),
				lotr8 = L.geoJSON(lotr, event8),
			 	lotr9 = L.geoJSON(lotr, event9),
				lotr10 = L.geoJSON(lotr, event10),
			 	lotr11 = L.geoJSON(lotr, event11),
				lotr12 = L.geoJSON(lotr, event12);
				lotr13 = L.geoJSON(lotr, event13);

			function time1(feature){
                if (feature.properties.time === time1.time) return true
            };
            function time2(feature){
                if (feature.properties.time === time2.time) return true
            };
			function time3(feature){
                if (feature.properties.time === time3.time) return true
            };
            function time4(feature){
                if (feature.properties.time === time4.time) return true
            };
			function time5(feature){
                if (feature.properties.time === time5.time) return true
            };
            function time6(feature){
                if (feature.properties.time === time6.time) return true
            };
			function time7(feature){
                if (feature.properties.time === time7.time) return true
            };
            function time8(feature){
                if (feature.properties.time === time8.time) return true
            };
			function time9(feature){
                if (feature.properties.time === time9.time) return true
            };
            function time10(feature){
                if (feature.properties.time === time10.time) return true
            };
			function time11(feature){
                if (feature.properties.time === time11.time) return true
            };
            function time12(feature){
                if (feature.properties.time === time12.time) return true
            };
			function time13(feature){
                if (feature.properties.time === time13.time) return true
            };

			hobbit1.options.time = time1.time;
			hobbit2.options.time = time2.time;
			hobbit3.options.time = time3.time;
			hobbit4.options.time = time4.time;
			hobbit5.options.time = time5.time;
			hobbit6.options.time = time6.time;
			hobbit7.options.time = time7.time;
			hobbit8.options.time = time8.time;
			hobbit9.options.time = time9.time;
			hobbit10.options.time = time10.time;

			lotr1.options.time = time1.time;
			lotr2.options.time = time2.time;
			lotr3.options.time = time3.time;
			lotr4.options.time = time4.time;
			lotr5.options.time = time5.time;
			lotr6.options.time = time6.time;
			lotr7.options.time = time7.time;
			lotr8.options.time = time8.time;
			lotr9.options.time = time9.time;
			lotr10.options.time = time10.time;
			lotr11.options.time = time11.time;
			lotr12.options.time = time12.time;
			lotr13.options.time = time13.time;

			var alphaPath1 = L.layerGroup([hobbit2,alphaLine1],{time:"02"}),
			 	alphaPath2 = L.layerGroup([hobbit3,alphaLine2],{time:"03"}),
				alphaPath3 = L.layerGroup([hobbit4,alphaLine3],{time:"04"}),
				alphaPath4 = L.layerGroup([hobbit5,alphaLine4],{time:"05"}),
				alphaPath5 = L.layerGroup([hobbit6,alphaLine5],{time:"06"}),
				alphaPath6 = L.layerGroup([hobbit7,alphaLine6],{time:"07"}),
				alphaPath7 = L.layerGroup([hobbit8,alphaLine7],{time:"08"}),
				alphaPath8 = L.layerGroup([hobbit9,alphaLine8],{time:"09"}),
				alphaPath9 = L.layerGroup([hobbit10,alphaLine9],{time:"10"}),
				alphaPath10 = L.layerGroup([alphaLine10],{time:"11"});

			var numberPath1 = L.layerGroup([lotr2,numberLine1],{time:"02"}),
			 	numberPath2 = L.layerGroup([lotr3,numberLine2],{time:"03"}),
				numberPath3 = L.layerGroup([lotr4,numberLine3],{time:"04"}),
				numberPath4 = L.layerGroup([lotr5,numberLine4],{time:"05"}),
				numberPath5 = L.layerGroup([lotr6,numberLine5],{time:"06"}),
				numberPath6 = L.layerGroup([lotr7,numberLine6],{time:"07"}),
				numberPath7 = L.layerGroup([lotr8,numberLine7],{time:"08"}),
				numberPath8 = L.layerGroup([lotr9,numberLine8],{time:"09"}),
				numberPath9 = L.layerGroup([lotr10,numberLine9],{time:"10"}),
				numberPath10 = L.layerGroup([lotr11,numberLine10],{time:"11"}),
				numberPath11 = L.layerGroup([lotr12,numberLine11],{time:"12"}),
				numberPath12 = L.layerGroup([lotr13,numberLine12],{time:"13"});

			var alphaMultiLayers = L.layerGroup([hobbit1,alphaPath1,alphaPath2,alphaPath3,alphaPath4,alphaPath5,alphaPath6,alphaPath7,alphaPath8,alphaPath9,alphaPath10]);

			var numberMultiLayers = L.layerGroup([lotr1,numberPath1,numberPath2,numberPath3,numberPath4,numberPath5,numberPath6,numberPath7,numberPath8,numberPath9,numberPath10,numberPath11,numberPath12]);

			// Set the sliderControl options
            var sliderControl1 = L.control.sliderControl( {
                layer: alphaMultiLayers, //REQUIRED
				position: "bottomright",
                alwaysShowDate: false,
                showAllPopups: false, // to show all popups, instead of one, same as popup option "autoClose: false"
                showPopups: false // to set it so, when a marker is generated by the slider, its popup doesn't automatically display
            });

			var sliderControl2 = L.control.sliderControl( {
				layer: numberMultiLayers, //REQUIRED
				position: "bottomright",
				alwaysShowDate: false,
				showAllPopups: false, // to show all popups, instead of one, same as popup option "autoClose: false"
				showPopups: false // to set it so, when a marker is generated by the slider, its popup doesn't automatically display
			});

            // Add the slider to the map
			memap.addControl(sliderControl2);
			memap.addControl(sliderControl1);

            // Initialize the slider
			sliderControl2.startSlider();
			sliderControl1.startSlider();

		</script>

	</body>

</html>
